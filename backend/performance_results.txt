ğŸ§± NextDNS Optimized Analytics - Wildcard Exclusion Performance Test
========================================================================================================================

ğŸ” Authenticating...
âœ… Authentication successful

ğŸ“Š Checking database size...
âœ… Database contains 179,571 DNS log records

ğŸ“ˆ Test 1/13: /logs - Baseline (no exclusion)
ğŸ“ˆ Test 2/13: /logs - Single exact match
ğŸ“ˆ Test 3/13: /logs - Leading wildcard
ğŸ“ˆ Test 4/13: /logs - Trailing wildcard
ğŸ“ˆ Test 5/13: /logs - Middle wildcard
ğŸ“ˆ Test 6/13: /logs - Multiple mixed patterns
ğŸ“ˆ Test 7/13: /logs/stats - Baseline
ğŸ“ˆ Test 8/13: /logs/stats - With wildcards
ğŸ“ˆ Test 9/13: /stats/overview - Baseline
ğŸ“ˆ Test 10/13: /stats/overview - With wildcards
ğŸ“ˆ Test 11/13: /stats/domains - Baseline
ğŸ“ˆ Test 12/13: /stats/domains - With wildcards
ğŸ“ˆ Test 13/13: /stats/tlds - With wildcards

========================================================================================================================
WILDCARD DOMAIN EXCLUSION - PERFORMANCE TEST RESULTS
========================================================================================================================
Scenario                                 Endpoint                  Min (ms)     Avg (ms)     Median (ms)  Max (ms)    
------------------------------------------------------------------------------------------------------------------------
Baseline - No exclusion                  /logs                     19.15        20.48        20.0         23.78       
Single exact match                       /logs                     38.52        39.09        39.15        39.57       
Leading wildcard (*.apple.com)           /logs                     51.73        53.4         53.08        56.2        
Trailing wildcard (tracking.*)           /logs                     49.55        50.39        50.34        52.53       
Middle wildcard (*tracking*)             /logs                     51.79        52.7         52.62        53.63       
Multiple mixed patterns (4)              /logs                     114.35       115.47       115.54       116.72      
Baseline - No exclusion                  /logs/stats               14.12        15.06        14.67        17.4        
With wildcards                           /logs/stats               71.81        72.82        72.71        75.63       
Baseline - No exclusion                  /stats/overview           15.2         15.96        15.85        16.71       
With wildcards (3 patterns)              /stats/overview           100.02       101.07       101.21       102.27      
Baseline - No exclusion                  /stats/domains            32.29        34.04        32.98        41.9        
With wildcards (3 patterns)              /stats/domains            192.16       197.28       194.84       215.92      
With wildcards (2 patterns)              /stats/tlds               151.92       153.42       152.83       158.75      
========================================================================================================================

PERFORMANCE IMPACT ANALYSIS
------------------------------------------------------------------------------------------------------------------------

/logs:
  Baseline (no exclusion): 20.48ms
  Single exact match: 39.09ms (+90.9% overhead)
  Leading wildcard (*.apple.com): 53.40ms (+160.7% overhead)
  Trailing wildcard (tracking.*): 50.39ms (+146.0% overhead)
  Middle wildcard (*tracking*): 52.70ms (+157.3% overhead)
  Multiple mixed patterns (4): 115.47ms (+463.8% overhead)

/logs/stats:
  Baseline (no exclusion): 15.06ms
  With wildcards: 72.82ms (+383.5% overhead)

/stats/overview:
  Baseline (no exclusion): 15.96ms
  With wildcards (3 patterns): 101.07ms (+533.3% overhead)

/stats/domains:
  Baseline (no exclusion): 34.04ms
  With wildcards (3 patterns): 197.28ms (+479.6% overhead)

âœ… Performance testing complete!

KEY FINDINGS:
- Exact match exclusions use optimized NOT IN queries (minimal overhead)
- Wildcard patterns use ILIKE for flexibility (slightly higher overhead)
- Performance impact depends on dataset size and pattern complexity
- Leading wildcards (*.domain.com) are less index-friendly than trailing (domain.*)

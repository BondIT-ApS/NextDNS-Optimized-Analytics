{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "ğŸš€ Start NextDNS Frontend Dev Server",
            "type": "shell",
            "command": "cd frontend && npm run dev",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ¢ Build NextDNS Frontend Production",
            "type": "shell",
            "command": "cd frontend && npm run build",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ” Preview Production Build",
            "type": "shell",
            "command": "npm run preview",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ³ Docker: Start Frontend Service",
            "type": "shell",
            "command": "docker-compose up --build -d",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ³ Docker: Stop All Services",
            "type": "shell",
            "command": "docker-compose down",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ³ Docker: View Logs",
            "type": "shell",
            "command": "docker-compose logs -f frontend",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Run Tests",
            "type": "shell",
            "command": "npm run test",
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Run Tests with Coverage",
            "type": "shell",
            "command": "npm run test:coverage",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Run Tests in Watch Mode",
            "type": "shell",
            "command": "npm run test -- --watch",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Backend: Run All Tests",
            "type": "shell",
            "command": "cd /Users/martin/Documents/GitHub/BondIT-ApS/NextDNS-Optimized-Analytics/backend && source venv/bin/activate && pytest tests/ --cov=. --cov-report=html --cov-report=term -v",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Backend: Test with Coverage",
            "type": "shell",
            "command": "cd backend && ([ -d venv ] || (echo 'âš ï¸  Virtual environment not found. Run \"Backend: Setup Virtual Environment\" task first.' && exit 1)) && source venv/bin/activate && pytest tests/ --cov=. --cov-report=html --cov-report=term -v",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ”§ Backend: Setup Virtual Environment",
            "type": "shell",
            "command": "cd backend && python3 -m venv venv && source venv/bin/activate && pip install --upgrade pip && pip install -r requirements.txt && pip install -r requirements-dev.txt && echo 'âœ… Virtual environment created and dependencies installed!'",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Frontend: Run All Quality Checks",
            "type": "shell",
            "command": "cd frontend && echo 'ğŸ§ª 1/5: Testing...' && npm run test -- --run && echo 'ğŸ¨ 2/5: Linting...' && npm run lint && echo 'âœ¨ 3/5: Formatting...' && npm run format && echo 'ğŸ”§ 4/5: Type checking...' && npm run type-check && echo 'ğŸ“Š 5/5: Coverage...' && npm run test:coverage && echo 'âœ… Frontend checks passed!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Backend: Run All Quality Checks",
            "type": "shell",
            "command": "cd backend && ([ -d venv ] || (echo 'âš ï¸  Virtual environment not found. Run \"Backend: Setup Virtual Environment\" task first.' && exit 1)) && source venv/bin/activate && echo 'ğŸ§ª 1/3: Testing...' && pytest tests/ -v && echo 'ğŸ“Š 2/3: Coverage...' && pytest tests/ --cov=. --cov-report=term && echo 'ğŸ 3/3: Linting...' && black . --check --exclude='(alembic|venv)' && pylint . && echo 'âœ… Backend checks passed!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ” Lint Frontend (ESLint)",
            "type": "shell",
            "command": "cd frontend && npm run lint",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ”§ Fix Frontend Linting Issues",
            "type": "shell",
            "command": "cd frontend && npm run lint:fix",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ’… Format Frontend Code (Prettier)",
            "type": "shell",
            "command": "cd frontend && npm run format",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ’… Check Frontend Formatting (Prettier)",
            "type": "shell",
            "command": "cd frontend && npm run format:check",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ Format Backend Code (Black)",
            "type": "shell",
            "command": "cd backend && black . --line-length=88 --exclude='(alembic|venv)'",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ Check Backend Formatting (Black)",
            "type": "shell",
            "command": "cd backend && black . --check --line-length=88 --exclude='(alembic|venv)'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ” Lint Backend (Pylint)",
            "type": "shell",
            "command": "cd backend && pylint . --rcfile=../.pylintrc",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ”§ TypeScript Type Checking",
            "type": "shell",
            "command": "npm run type-check",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ“¦ Install Dependencies",
            "type": "shell",
            "command": "npm install",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ“¦ Update Dependencies",
            "type": "shell",
            "command": "npm update",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ” Check Node Environment",
            "type": "shell",
            "command": "node --version && npm --version && npm list --depth=0 | grep -E '(react|vite|typescript|eslint|prettier)'",
            "group": "none",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸŒ Open Frontend (Dev)",
            "type": "shell",
            "command": "python -m webbrowser http://localhost:5002",
            "group": "none",
            "problemMatcher": []
        },
        {
            "label": "ğŸŒ Open Frontend (Docker)",
            "type": "shell",
            "command": "python -m webbrowser http://localhost:5002",
            "group": "none",
            "problemMatcher": []
        },
        {
            "label": "âœ¨ Run All Frontend Quality Checks",
            "type": "shell",
            "command": "cd frontend && npm run lint && npm run format:check && npm run type-check && npm run test",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "âœ¨ Run All Backend Quality Checks",
            "type": "shell",
            "command": "cd backend && black . --check --exclude='(alembic|venv)' && pylint . --rcfile=../.pylintrc",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "âœ¨ Run All Quality Checks (Full Project)",
            "type": "shell",
            "command": "echo 'ğŸ§§ LEGO Full Quality Gate - All systems check!' && echo '' && echo 'âš™ï¸ GitHub Actions Validation...' && actionlint .github/workflows/* && echo '' && echo 'ğŸ Backend Quality...' && cd backend && black . --check --line-length=88 --exclude='(alembic|venv)' && pylint . --rcfile=../.pylintrc && echo '' && echo 'ğŸ† Frontend Quality...' && cd ../frontend && npm run lint && npm run format:check && npm run type-check && npm run test && echo '' && echo 'ğŸ‰ All LEGO pieces validated! ğŸ¢'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸš€ Pre-Push Validation (Complete Quality Gate)",
            "type": "shell",
            "command": "echo 'ğŸ§§ LEGO Pre-Push Quality Gate - Validating all pieces fit together!' && echo '' && echo 'âš™ï¸ Step 1: GitHub Actions Validation...' && actionlint .github/workflows/* && echo '' && echo 'ğŸ” Step 2: Frontend Linting...' && cd frontend && npm run lint && echo '' && echo 'ğŸ Step 3: Backend Linting...' && cd ../backend && black . --check --line-length=88 --exclude='(alembic|venv)' && pylint . --rcfile=../.pylintrc && echo '' && echo 'âœ¨ Step 4: Frontend Quality...' && cd ../frontend && npm run format:check && npm run type-check && npm run test && echo '' && echo 'ğŸ›¡ï¸ Step 5: Backend Security & Quality...' && cd ../backend && safety scan --apply-fixes --detailed-output && bandit -r . -f json -o bandit-report.json -x tests/ || true && echo '' && echo 'ğŸ³ Step 6: Docker Build Test...' && cd .. && docker-compose build && echo '' && echo 'ğŸ‰ All LEGO pieces validated! Ready to push! ğŸ¢'"
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ”§ Quick Pre-Push Check (Essential Only)",
            "type": "shell",
            "command": "echo 'ğŸ§± Quick LEGO Quality Check...' && echo '' && echo 'ğŸ” Linting...' && cd frontend && npm run lint && cd ../backend && black . --check --line-length=88 --exclude='(alembic|venv)' && echo '' && echo 'âœ¨ Type Checking...' && cd ../frontend && npm run type-check && echo '' && echo 'ğŸ‰ Quick validation complete! ğŸ¢'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ§ª Fix All Formatting Issues",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Auto-Formatter - Making all pieces fit perfectly!' && echo '' && echo 'ğŸ Formatting Backend (Black)...' && cd backend && black . --line-length=88 --exclude='(alembic|venv)' && echo '' && echo 'ğŸ¨ Formatting Frontend (Prettier)...' && cd ../frontend && npm run format && echo '' && echo 'ğŸ‰ All LEGO pieces are now perfectly aligned! ğŸ¢'",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ“Š Run All Tests (Frontend + Backend)",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Test Suite - Validating all building blocks!' && echo '' && echo 'âš™ï¸ Frontend Tests...' && cd frontend && npm run test && echo '' && echo 'ğŸ Backend Tests...' && cd ../backend && python -m pytest --cov=. --cov-report=xml || echo 'No backend tests found, skipping' && echo '' && echo 'ğŸ‰ All tests completed! ğŸ¢'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ›¡ï¸ Security Audit (Full)",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Security Fortress Check!' && echo '' && echo 'ğŸ“± Frontend Security Audit...' && cd frontend && npm audit --audit-level=high && echo '' && echo 'ğŸ Backend Security Audit...' && cd ../backend && safety scan --apply-fixes --detailed-output && bandit -r . -f json -o bandit-report.json -x tests/ || true && echo '' && echo 'ğŸ‰ Security audit complete! ğŸ¡'"
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸ“ Git Status & Changes Overview",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Project Status Check!' && echo '' && echo 'ğŸŒ³ Git Status:' && git status --short && echo '' && echo 'ğŸ“ˆ Recent commits:' && git log --oneline -5 && echo '' && echo 'ğŸ“Š File changes:' && git diff --stat HEAD~1 || echo 'No recent changes to compare'",
            "group": "none",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "ğŸš¨ Emergency: Reset to Clean State",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Emergency Reset - Cleaning workspace!' && echo '' && echo 'ğŸ—ºï¸ Stopping containers...' && docker-compose down || true && echo '' && echo 'ğŸ§½ Cleaning up...' && git status && echo '' && echo 'âš ï¸ This will discard uncommitted changes!' && echo 'Press Ctrl+C to cancel, or wait 5 seconds to continue...' && sleep 5 && git checkout . && git clean -fd && echo '' && echo 'ğŸ‰ Workspace reset to clean state! ğŸ¢'",
            "group": "none",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "âš™ï¸ Lint GitHub Actions (actionlint)",
            "type": "shell",
            "command": "actionlint .github/workflows/*",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": {
                "owner": "actionlint",
                "fileLocation": "relative",
                "pattern": {
                    "regexp": "^(.+?):(\\d+):(\\d+): (.+?) \\[(.+?)\\]$",
                    "file": 1,
                    "line": 2,
                    "column": 3,
                    "message": 4,
                    "code": 5
                }
            }
        },
        {
            "label": "âš™ï¸ Lint Single Workflow File",
            "type": "shell",
            "command": "actionlint ${input:workflowFile}",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": {
                "owner": "actionlint",
                "fileLocation": "relative",
                "pattern": {
                    "regexp": "^(.+?):(\\d+):(\\d+): (.+?) \\[(.+?)\\]$",
                    "file": 1,
                    "line": 2,
                    "column": 3,
                    "message": 4,
                    "code": 5
                }
            }
        },
        {
            "label": "âš™ï¸ Lint GitHub Actions (Verbose)",
            "type": "shell",
            "command": "actionlint -verbose .github/workflows/*",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": {
                "owner": "actionlint",
                "fileLocation": "relative",
                "pattern": {
                    "regexp": "^(.+?):(\\d+):(\\d+): (.+?) \\[(.+?)\\]$",
                    "file": 1,
                    "line": 2,
                    "column": 3,
                    "message": 4,
                    "code": 5
                }
            }
        },
        {
            "label": "ğŸš€ Commit & Push (with Quality Gate)",
            "type": "shell",
            "command": "echo 'ğŸ§± LEGO Smart Push - Quality Gate + Git Push!' && echo '' && echo 'ğŸ” Running Quality Gate...' && cd frontend && npm run lint && cd ../backend && black . --line-length=88 --exclude='(alembic|venv)' && cd ../frontend && npm run type-check && echo '' && echo 'ğŸ“ Preparing commit...' && cd .. && git add . && echo 'Enter commit message:' && read -p 'Commit: ' commit_msg && git commit -m "ğŸ§± $commit_msg" && echo '' && echo 'ğŸš€ Pushing to remote...' && git push && echo '' && echo 'ğŸ‰ Successfully pushed with quality validation! ğŸ¢'",
            "group": "none",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "workflowFile",
            "description": "Select GitHub Actions workflow file to lint",
            "type": "pickString",
            "options": [
                ".github/workflows/docker-publish.yml",
                ".github/workflows/dependabot-weekly.yml",
                ".github/workflows/pr-quality-gate.yml",
                ".github/workflows/security-monitoring.yml"
            ]
        }
    ]
}
